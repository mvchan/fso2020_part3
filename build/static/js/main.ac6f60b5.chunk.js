(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t.n(o),a=t(14),i=t.n(a),u=(t(20),t(3)),s=function(e){var n=e.filterName,t=e.setFilterName;return Object(r.jsx)("form",{children:Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:n,onChange:function(e){return t(e.target.value)}})]})})},l=function(e){var n=e.obj;return Object(r.jsxs)("form",{onSubmit:n.addPerson,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:n.newName,onChange:n.handleNameChange})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:n.newNumber,onChange:n.handleNumChange})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.deletePerson;return Object(r.jsxs)("p",{children:[n.name,": ",n.number," ",Object(r.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},f=function(e){var n=e.obj,t=n.deletePerson;return Object(r.jsx)(r.Fragment,{children:n.persons.filter((function(e){return e.name.toLowerCase().includes(n.filterName.toLowerCase())})).map((function(e){return Object(r.jsx)(d,{person:e,deletePerson:t},e.id)}))})},b=t(4),j=t.n(b),h="/api/persons",m=function(){return j.a.get(h).then((function(e){return e.data}))},g=function(e){return j.a.post(h,e).then((function(e){return e.data}))},O=function(e,n){return j.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(h,"/").concat(e)).then((function(e){return e}))},x=function(e){var n=e.message,t=e.isError;return null===n?null:Object(r.jsx)("div",{style:t?{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},v=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),i=Object(u.a)(a,2),d=i[0],b=i[1],j=Object(o.useState)(""),h=Object(u.a)(j,2),v=h[0],w=h[1],C=Object(o.useState)(""),N=Object(u.a)(C,2),S=N[0],y=N[1],k=Object(o.useState)(null),L=Object(u.a)(k,2),P=L[0],F=L[1],E=Object(o.useState)(null),T=Object(u.a)(E,2),B=T[0],D=T[1],I=Object(o.useState)(0),R=Object(u.a)(I,2),z=R[0],A=R[1];return Object(o.useEffect)((function(){console.log("effect for fetching persons called"),m().then((function(e){console.log("promise fulfilled"),c(e)}))}),[z]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(x,{message:P,isError:!1}),Object(r.jsx)(x,{message:B,isError:!0}),Object(r.jsx)(s,{filterName:d,setFilterName:b}),Object(r.jsx)("h3",{children:"Add a new"}),Object(r.jsx)(l,{obj:{addPerson:function(e){e.preventDefault();var n={name:v,number:S,id:t[t.length-1].id+1};v.trim().length&&S.trim().length&&(t.map((function(e){return e.name.toLowerCase()})).indexOf(v.toLowerCase())<0?g(n).then((function(e){console.log("new person added: ",e),F("Added ".concat(e.name)),setTimeout((function(){F(null)}),5e3),c(t.concat(e)),w(""),y("")})).catch((function(e){console.log("add error result: ",e),D("".concat(v," already exists in the server. Local data has been refreshed.")),setTimeout((function(){D(null)}),5e3),A(z+1)})):window.confirm("".concat(v," is already added to phonebook. Replace old number with a new one?"))&&O(t.find((function(e){return e.name.toLowerCase()===v.toLowerCase()})).id,n).then((function(e){console.log("update result: ",e),c(t.filter((function(e){return e.name!==v})).concat(e)),w(""),y("")})))},newName:v,newNumber:S,handleNameChange:function(e){w(e.target.value)},handleNumChange:function(e){y(e.target.value)}}}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(f,{obj:{persons:t,filterName:d,deletePerson:function(e){var n=e.name,r=e.id;window.confirm("Delete ".concat(n,"?"))&&p(r).then((function(e){console.log("delete result: ",e),c(t.filter((function(e){return e.id!==r})))})).catch((function(e){console.log("delete error caught: ",e),D("Information of ".concat(n," has already been removed from server.")),setTimeout((function(){D(null)}),5e3),c(t.filter((function(e){return e.id!==r})))}))}}})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,39)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),r(e),o(e),c(e),a(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root")),w()}},[[38,1,2]]]);
//# sourceMappingURL=main.ac6f60b5.chunk.js.map